classdef VehicleSprite < Sprite
    %VEHICLESPRITE Mobile graphical representation of a vehicle
    
    properties (Access = private)
        locationListener
        deletionListener
    end
    
    methods
        function obj = VehicleSprite(axesIn, imageData, alphaData, vehicle)
            obj = obj@Sprite(axesIn, imageData, alphaData);
            
            obj.moveTo(vehicle.location);
            
            obj.locationListener = addlistener(vehicle,'locationChanged',@obj.motionCallback);
            obj.deletionListener = addlistener(vehicle,'beingDeleted',@(~,~)delete(obj));        
        end
        
        function delete(obj)
            delete(obj.locationListener);
            delete(obj.deletionListener);
        end
    end
    
    methods (Access = private)
        function motionCallback(obj,src,~)
            obj.moveTo(src.location);
        end
    end    
end

