initloc = [-122.4,37.8];
value = uint16(18);

valueTable = 18*ones(100,1);
valueTable(30:50)=38;

dloc = EventDispatcher('127.0.0.1',10001);
dsen = EventDispatcher('127.0.0.1',10003);

for i = 1:100;   
    dloc.dispatch(sprintf('1,123456,%f7,%f7,%f7',10*rand,initloc(1),initloc(2)));
    dsen.dispatch(sprintf('PG,%f9,%d',now,value));
    initloc = initloc + .0005*randn(1,2);
    %value = max(value + (randn/3)^9,0)
    value = valueTable(i);
    pause(.1)
end

delete(dloc)
delete(dsen)