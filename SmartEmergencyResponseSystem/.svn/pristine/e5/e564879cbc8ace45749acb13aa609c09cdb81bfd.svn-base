classdef QuadCopter < Vehicle
    %% Class representing a quadcopter drone
    properties
        capacity = 10   % How much can the quadcopter carry (weight)?
        charge = 1      % Fraction of range remaining
        maxRange = 100  % Distance drone can travel on full charge
        cargo = []      % Vector of Items that the quadcopter is carrying
        waypointTargets = {}  % vector of requests/ground vehicles located 
                              % at the lat/lons listed in the route property
        speed = 0.004     % Arbitrary, for MATLAB Kinematics
        
    end
    
    properties (Access = private)
        connection
        locationListener
    end
    
    methods
        function obj = QuadCopter(IDIn,LocationIn)
            obj = obj@Vehicle(IDIn,LocationIn);
            obj.route = zeros(0,2);     % Set dimensionality of route
            %obj.connection = QuadCopterConnection('',10003);
            %obj.locationListener = addlistener(obj.connection,'datagramReceived',@obj.unpackDatagram);
        end    
        
        function waypointReached(obj)
            obj.route = obj.route(2:end,:);
            obj.waypointTargets = obj.waypointTargets(2:end);
        end
        
        function unpackDatagram(obj)
            %obj.location = [obj.connection.lastData.latitude,...
            %                obj.connection.lastData.longitude];
        end
        
        function setLocation(obj,newLocation)
            obj.location = newLocation;
        end
    end
    
end

