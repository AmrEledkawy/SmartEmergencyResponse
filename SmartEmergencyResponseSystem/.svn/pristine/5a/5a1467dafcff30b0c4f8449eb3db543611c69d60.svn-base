function garbage = runMission
    garbage = {};
    
    imData = imread('SFHiRes.png');
    [nodes, graph, deployment] = loadNodeDataFromMapFile('SanFrancisco.map');
    theaterXlim = [-122.459450, -122.381392];
    theaterYlim = [37.773665, 37.811574];

    GV = GroundVehicleManager(nodes);
    QC = QuadCopterManager;
    KU = KukaManager;
    BB = BiobotManager;
    AT = AtlasManager;
    
    RM = RequestManager;

    stationOptimizer = PathPlanner;
    quadcopterOptimizer = QuadrotorRoutePlanner;

    MIT = shAirConnection('',9999);
    lis = addlistener(MIT,'validDatagramReceived',@newRequest);
    garbage = [garbage, lis];
    
    missionUI(imData,...
              nodes,...
              RM,GV,QC,KU,BB,AT,deployment,...
              graph,...
              stationOptimizer,quadcopterOptimizer,...
              theaterXlim,theaterYlim);
          
    missionMap(imData,...
               nodes,...
               RM,GV,QC,KU,BB,AT,deployment,...
               graph,...
               theaterXlim,theaterYlim);
    
    function newRequest(src,~)
        itemMap = {'Defibrillator',...
                   'Thermal Camera',...
                   'Mobile Camera',...
                   'Stabilizer',...
                   'Sterile Band',...
                   'Thrombolytics',...
                   'Thermal Blanket',...
                   'Carbamazepine',...
                   'Oral Airway',...
                   'Endotracheal Tube',...
                   'Mask'};
        isPickup = (src.lastValidData.pickupDropoff==2);
        RM.addRequest([src.lastValidData.latitude, src.lastValidData.longitude],...
                      ItemFactory.makeItem(itemMap{src.lastValidData.itemID}),...
                      'MIT shAir',...
                      src.lastValidData.priority,...
                      now,...
                      now,...
                      src.lastValidData.quantity,...
                      ~isPickup,...
                      isPickup);
    end
end